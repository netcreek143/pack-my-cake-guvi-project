<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Cart - Pack My Cake</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"></head><body>
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom"><div class="container"><a class="navbar-brand fw-bold" href="/">Pack My Cake</a></div></nav>
<main class="container my-4">
  <h3>Your Cart</h3>
  <div id="cartArea"></div>
  <div class="mt-3"><a href="/checkout.html" class="btn btn-success">Proceed to Checkout</a> <a href="/products.html" class="btn btn-link">Continue Shopping</a></div>
</main>
<script src="/js/app.js"></script>
<script>
function render(){
  const cart = getCart();
  const area = document.getElementById('cartArea');
  if (!cart.length) { area.innerHTML = '<p>Your cart is empty.</p>'; return; }
  let subtotal=0;
  let html = '<table class="table"><thead><tr><th>Item</th><th>Qty</th><th>Price</th><th>Subtotal</th><th></th></tr></thead><tbody>';
  cart.forEach(i=>{ const s = i.qty * i.price; subtotal += s; html += `<tr><td>${i.title}</td><td><input type="number" value="${i.qty}" min="${i.moq||1}" onchange="updateQty(${i.id}, this.value)" style="width:80px" class="form-control form-control-sm"></td><td>₹${i.price.toFixed(2)}</td><td>₹${s.toFixed(2)}</td><td><button class="btn btn-sm btn-danger" onclick="remove(${i.id})">Remove</button></td></tr>` });
  html += `</tbody></table><div class="text-end"><h5>Subtotal: ₹${subtotal.toFixed(2)}</h5></div>`;
  area.innerHTML = html;
}
function updateQty(id, v){ const cart = getCart(); const item = cart.find(i=>i.id==id); item.qty = Number(v); if (item.qty < item.moq) { alert('MOQ is ' + item.moq); item.qty = item.moq; } saveCart(cart); render(); }
function remove(id){ const cart = getCart().filter(i=>i.id!=id); saveCart(cart); render(); }
render();
</script>
</body></html>
